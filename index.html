<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PrasaTek | System Solutions</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="icon" type="image/png" href="favicon.png">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
:root{
  --main:#0a3d62;
  --accent:#25D366;
  --light:#f5f7fa;
  --dark:#333;
  --skeleton: linear-gradient(110deg, #ececec 8%, #f5f5f5 18%, #ececec 33%);
}
*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins', sans-serif}
html{scroll-behavior:smooth}
body{background:var(--light);color:var(--dark);overflow-x:hidden}

/* --- ANIMATIONS --- */
@keyframes shine { to { background-position-x: -200%; } }

/* --- SKELETON LOADERS --- */
.skeleton {
  background: var(--skeleton);
  background-size: 200% 100%;
  animation: 1.5s shine linear infinite;
  border-radius: 16px;
  height: 180px;
  width: 100%;
}

/* HEADER & NAV */
header{
  background:var(--main);
  color:#fff;
  padding:15px 8%;
  display:flex;
  align-items:center;
  justify-content:space-between;
  position:sticky;
  top:0;
  z-index:100;
  box-shadow:0 4px 12px rgba(0,0,0,0.1);
}
.logo{display:flex;align-items:center;gap:10px;text-decoration:none;color:#fff;font-size:1.2rem;}
.logo img{height:35px}

nav{display:flex;align-items:center;gap:20px}
nav a{color:#fff;text-decoration:none;font-weight:500;transition:0.3s;font-size:0.95rem;}
nav a:hover{color:var(--accent)}

.mobile-toggle{display:none;background:none;border:none;color:#fff;font-size:26px;cursor:pointer;}

/* HERO */
.hero{
  background:linear-gradient(rgba(10,61,98,0.85),rgba(10,61,98,0.7)),
  url("https://images.unsplash.com/photo-1581090700227-1e37b190418e?auto=format&fit=crop&w=1920") center/cover;
  color:#fff;text-align:center;
  padding:120px 10%;
}
.hero h2{font-size:clamp(32px, 5vw, 48px); margin-bottom:15px;line-height:1.2}

/* CARDS & GRID */
section{padding:80px 8%}
section h2{text-align:center;color:var(--main);margin-bottom:50px;font-size:2rem}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:30px;}
.card{
  background:#fff;padding:30px;border-radius:16px;
  box-shadow:0 10px 25px rgba(0,0,0,.05);
  transition:0.3s cubic-bezier(0.4, 0, 0.2, 1);
  border:1px solid rgba(0,0,0,0.03);
}
.card:hover{transform:translateY(-8px);box-shadow:0 20px 40px rgba(0,0,0,.1);}

/* CONTACT & WHATSAPP */
.contactWrap{
  background:linear-gradient(135deg,#0a3d62,#155e91);
  border-radius:24px;padding:50px;color:#fff;
}
.whatsapp-fab {
  position: fixed;
  bottom: 30px;
  left: 30px;
  background: var(--accent);
  width: 60px; height: 60px;
  border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  box-shadow: 0 10px 25px rgba(37,211,102,0.4);
  z-index: 999;
  cursor: pointer;
  transition: 0.3s;
}
.whatsapp-fab:hover { transform: scale(1.1); }

/* FORM */
.review-form { max-width: 600px; margin: 0 auto; }
input, textarea {
  width: 100%; padding: 14px; margin: 8px 0;
  border-radius: 8px; border: 1px solid #ddd;
}
button.main {
  background: var(--accent); border: none; padding: 14px 40px;
  color: #fff; border-radius: 50px; cursor: pointer;
  font-weight: 600; width: 100%; transition: 0.3s;
}
button.wa-btn { background: #128C7E; margin-top: 10px; }

/* MAP */
.mapBox { width: 100%; height: 350px; border-radius: 16px; overflow: hidden; margin-top: 30px; }

/* FOOTER & POPUP */
footer { background: var(--main); color: rgba(255,255,255,0.7); text-align: center; padding: 30px; }
#popup {
  position: fixed; bottom: 30px; right: 30px; background: #333; color: #fff;
  padding: 15px 25px; border-radius: 8px; opacity: 0; pointer-events: none; transition: 0.4s;
}
#popup.show { opacity: 1; transform: translateY(-10px); }

@media(max-width:768px){
  .mobile-toggle{display:block}
  nav{
    position:absolute; top:100%; left:0; right:0; background:var(--main);
    flex-direction:column; padding:20px; clip-path:circle(0% at 100% 0); transition:0.4s;
  }
  nav.active{clip-path:circle(150% at 100% 0)}
}
</style>
</head>
<body>

<header>
  <a href="#" class="logo"><strong>PrasaTek</strong></a>
  <button class="mobile-toggle" onclick="toggleMenu()">‚ò∞</button>
  <nav id="navMenu">
    <a href="#services" onclick="toggleMenu()">Services</a>
    <a href="#products" onclick="toggleMenu()">Products</a>
    <a href="#reviews" onclick="toggleMenu()">Reviews</a>
    <a href="#contact" onclick="toggleMenu()">Contact</a>
    <button class="langBtn" onclick="toggleLang()" id="langBtn">‡∑É‡∑í‡∂Ç</button>
  </nav>
</header>

<div class="hero">
  <h2 id="heroTitle">Your Trusted Technology Partner</h2>
  <p id="heroDesc">Professional Repairs & Custom PC Solutions</p>
</div>

<section id="services">
  <h2 id="srvTitle">Our Services</h2>
  <div id="servicesList" class="grid">
    <div class="skeleton"></div><div class="skeleton"></div><div class="skeleton"></div>
  </div>
</section>

<section id="products">
  <h2 id="prdTitle">Featured Products</h2>
  <div id="productsList" class="grid">
    <div class="skeleton"></div><div class="skeleton"></div><div class="skeleton"></div>
  </div>
</section>

<section id="contact">
  <h2 id="contactTitle">Get in Touch</h2>
  <div class="contactWrap">
    <div class="grid">
      <div>
        <h3 id="cPhone">Loading...</h3>
        <p id="cEmail">Loading...</p>
        <p id="cAddress">Loading...</p>
        
        <div class="mapBox">
          <iframe src="https://www.google.com/maps/embed?pb=PLACEHOLDER" allowfullscreen="" loading="lazy"></iframe>
        </div>
      </div>
      
      <div class="card" style="color:#333">
        <h3>Quick Inquiry</h3>
        <input id="qName" placeholder="Your Name">
        <textarea id="qMsg" placeholder="How can we help you?"></textarea>
        <button class="main wa-btn" onclick="sendWhatsApp()">Chat on WhatsApp</button>
      </div>
    </div>
  </div>
</section>

<section id="reviews">
  <h2 id="revTitle">What Clients Say</h2>
  <div id="reviewsList" class="grid"></div>
  <br><br>
  <div class="review-form">
    <h3 id="addRev" style="text-align:center; margin-bottom:20px">Write a Review</h3>
    <input id="rName" placeholder="Name">
    <textarea id="rMsg" placeholder="Your experience..."></textarea>
    <button class="main" onclick="submitReview()">Submit for Approval</button>
  </div>
</section>

<a class="whatsapp-fab" onclick="sendWhatsApp()">
  <img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" width="35" style="filter:invert(1)">
</a>

<footer>¬© 2026 <strong>PrasaTek System Solutions</strong>.</footer>
<div id="popup">Notification</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, collection, getDocs, addDoc, query, where } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSy...", 
    authDomain: "prasatek-8a823.firebaseapp.com",
    projectId: "prasatek-8a823"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  let lang = "en";
  let shopPhone = "94700000000"; // Default

  const showPopup = (m) => {
    const p = document.getElementById("popup");
    p.innerText = m; p.classList.add("show");
    setTimeout(() => p.classList.remove("show"), 3000);
  };

  window.toggleMenu = () => document.getElementById("navMenu").classList.toggle("active");

  // --- WHATSAPP LOGIC ---
  window.sendWhatsApp = () => {
    const name = document.getElementById("qName").value || "Customer";
    const msg = document.getElementById("qMsg").value || "I'm interested in your services.";
    const text = `Hi PrasaTek, I'm ${name}. ${msg}`;
    window.open(`https://wa.me/${shopPhone}?text=${encodeURIComponent(text)}`, '_blank');
  };

  // --- DATA LOADING ---
  async function loadContent() {
    // Services
    const sSnap = await getDocs(collection(db, "services"));
    let sHtml = "";
    sSnap.forEach(doc => {
      const d = doc.data();
      sHtml += `<div class="card"><h3>${lang==='si' && d.name_si ? d.name_si : d.name}</h3><p>${lang==='si' && d.desc_si ? d.desc_si : d.desc}</p></div>`;
    });
    document.getElementById("servicesList").innerHTML = sHtml || "<p>Coming soon...</p>";

    // Products
    const pSnap = await getDocs(collection(db, "products"));
    let pHtml = "";
    pSnap.forEach(doc => {
      const d = doc.data();
      pHtml += `<div class="card"><h3>${d.name}</h3><p>${d.price ? 'Rs. ' + d.price : d.desc}</p></div>`;
    });
    document.getElementById("productsList").innerHTML = pHtml || "<p>New stock arriving!</p>";
  }

  async function loadSettings() {
    const snap = await getDocs(collection(db, "settings"));
    snap.forEach(doc => {
      const d = doc.data();
      document.getElementById("cPhone").innerText = "üìû " + d.phone;
      document.getElementById("cEmail").innerText = "üìß " + d.email;
      document.getElementById("cAddress").innerText = "üìç " + d.address;
      shopPhone = d.phone.replace(/[^0-9]/g, ''); // Format for WhatsApp
    });
  }

  window.submitReview = async () => {
    const name = document.getElementById("rName").value;
    const msg = document.getElementById("rMsg").value;
    if(!name || !msg) return showPopup("Fill all fields");
    
    await addDoc(collection(db, "reviews"), { name, message: msg, approved: false });
    showPopup("Review sent! We will publish it soon.");
    document.getElementById("rName").value = ""; document.getElementById("rMsg").value = "";
  };

  // Initialize
  loadContent();
  loadSettings();

  // Handle Translation
  window.toggleLang = () => {
    lang = lang === "en" ? "si" : "en";
    document.getElementById("langBtn").innerText = lang === "en" ? "‡∑É‡∑í‡∂Ç" : "EN";
    // For a real app, you'd map translations here or reload
    loadContent(); 
    showPopup(lang === "si" ? "‡∂∑‡∑è‡∑Ç‡∑è‡∑Ä ‡∑Ä‡∑ô‡∂±‡∑É‡∑ä ‡∂ö‡∂ª‡∂± ‡∂Ω‡∂Ø‡∑í" : "Language Switched");
  };
</script>

</body>
</html>
